sudo: false
language: cpp

matrix:
  include:
    - os: linux
      compiler: gcc
      addons:
        apt:
          sources: ['ubuntu-toolchain-r-test']
          packages: ['g++-4.9', 'libssl-dev', 'libpng12-dev', 'libboost-dev', 'libsnappy-dev']
      env: TOOLSET=gcc-4.9

    - os: linux
      compiler: gcc
      addons:
        apt:
          sources: ['ubuntu-toolchain-r-test']
          packages: ['g++-5', 'libssl-dev', 'libpng12-dev', 'libboost-dev', 'libsnappy-dev']
      env: TOOLSET=gcc-5.0

    - os: linux
      compiler: clang
      addons:
        apt:
          sources: ['ubuntu-toolchain-r-test', 'llvm-toolchain-precise-3.5']
          packages: ['clang-3.5', 'libssl-dev', 'libpng12-dev', 'libboost-dev', 'libsnappy-dev']
      env: TOOLSET=clang-3.5

    - os: linux
      compiler: clang
      addons:
        apt:
          sources: ['ubuntu-toolchain-r-test', 'llvm-toolchain-precise-3.6']
          packages: ['clang-3.6', 'libssl-dev', 'libpng12-dev', 'libboost-dev', 'libsnappy-dev']
      env: TOOLSET=clang-3.6

    - os: osx
      compiler: clang
      env: TOOLSET=clang

before_install:
  - "echo -e 'using gcc : : g++ ;
using gcc : 4.9 : g++-4.9 ;
using gcc : 5.0 : g++-5.0 ;

using clang : : clang++ : <cxxflags>-Qunused-arguments ;
' > ~/user-config.jam"

script:
  - bjam linkflags=-c --toolset=$TOOLSET -q exe


#branches:
#  only:
#    - master

notifications:
  email:
    recipients:
      - jpoelen@wallix.com
      - rzhou@wallix.com
      - cgrosjean@wallix.com
      #- jinthavong@wallix.com
      #- mtan@wallix.com
    on_success: never
    on_failure: always
