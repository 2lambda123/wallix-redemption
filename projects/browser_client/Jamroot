using emscripten ;

project pentamino
    : requirements
    <cxxflags>-Wall
    <include>src
    : default-build release
;

#
# Pentamino
#

path-constant TOP : . ;

install pentamino
    : [ glob ./sys/pentamino/* ] pentamino.js pentamino.html
    : <location>./sandbox
    ;

objjs penta.bc 
    : 
    src/ftests/penta.cpp 
    : 
    <cxxflags>-g3 
    ;

exejs pentamino.js : penta.bc : 
    <cxxflags>-g3
    <cxxflags>"-s EXPORTED_FUNCTIONS=\"['_run_main']\"" 
    <cxxflags>"--shell-file templates/penta_template.html"
 ;

actions nothing { }

make pentamino.html : pentamino.js : nothing ;

import testing ;

# unit-test test_penta : test_penta.cpp libboost_unit_test ;

